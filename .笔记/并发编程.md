# 1、概述

## 1.1 、预备知识

![Java并发](C:\文档\Java并发.png)

![Java并发 (1)](C:\文档\Java并发 (1).png)

# 2、进程与线程

## 2.1、进程与线程

### 进程

- 程序由指令和数据组成，但这些指令需要运行，数据需要读写，就必须将指令加载至CPU中，数据加载至内存。在指令运行过程中还需要用磁盘、网络等设备。进程就是运来加载指令、管理内存、管理IO的
- 当一个程序被运行，从磁盘加载这个程序的代码至内存，这时就开起了一个进程。
- 进程就可以视为程序的一个实例。大部分程序可以同时运行多个实例进程（例如笔记本、画图、浏览器等），也有的程序只能启动一个实例进程（例如酷狗音乐等）。

### 线程

- 一个进程之内可以分为一到多个线程。
- 一个线程就是一个指令流，将指令流中的一条条指令以一定的顺序交给CPU执行。
- Java中，线程作为最小的调度单位，进程作为资源分配的最小单位，在Windows中进程是不活动的，只是作为线程的容器。

### 二者对比

- 进程基本上是相互独立的，而线程存在于进程内，是进程的一个子集。
- 进程拥有共享的资源，如内存空间等，供其内部的线程共享。
- 进程间通信较为复杂。
  - 同一台计算机的进程通信成为IPC（Inter-process communication）
  - 不同计算机之间的进程通信，需要通过网络，并遵守共同的协议，例如HTTP
- 线程通信相对简单，因为他们共享进程内存，例如多个线程可以访问同一个共享变量。
- 线程更轻量，线程上下文切换成本一般要比进程上下文切换低。

## 2.2、并行与并发

单核CPU下，线程实际还是 **串行执行 **的，操作系统中有一个组件叫做任务调度器，将cpu的时间片（Windows下时间片最小约为15毫秒）分给不同的程序使用，只是由于cpu在线程间（时间片段很短）的切换非常快，人类感觉 **同时运行**。总结一句话就是： **微观串行，宏观并行** ，一般会将这种 **线程轮流使用** CPU 的做法称为并发，

|--|